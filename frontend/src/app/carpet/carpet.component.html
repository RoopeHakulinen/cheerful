<div
  [style.background-color]="carpet.color"
  [style.height]="(carpet.height * tileDimension) + 'px'"
  [style.width]="(carpet.width * tileDimension) + 'px'"
  class="carpet">
  <div class="grid">
    <div class="lines vertical">
      <div *ngFor="let _ of verticalSegments" class="line"></div>
    </div>
    <div class="lines horizontal">
      <div *ngFor="let _ of horizontalSegments" class="line"></div>
    </div>
    <div
      [style.height]="(carpet.height * tileDimension) + 'px'"
      cdkDropListGroup
      class="tile-container">
      <div
        (cdkDropListDropped)="swapPositions(index)"
        (click)="active.emit(item)"
        *ngFor="let item of subframe.grid; index as index"
        [@animate]="{value: animate, params: getAnimationParams(item, index)}"
        [attr.index]="index"
        [class.active]="activeItem && activeItem === item"
        [style.flex]="'0 1 ' + tileDimension + 'px'"
        [style.height]="tileDimension + 'px'"
        [style.width]="tileDimension + 'px'"
        cdkDropList
        class="tile {{item.position[0]}}">
        <div (cdkDragStarted)="dragStarted(index)" cdkDrag class="drag-container">
          <div
            *ngIf="item.text && (item.text | typeOf) === 'string'"
            [style.background]="item.color"
            class="text-container {{item.shape}} keskari">
            {{item.text}}
          </div>
          <div *ngIf="item.text && (isTwoGroup(item.text) || isThreeGroup(item.text) || isFourGroup(item.text))"
               [style.background]="item.color"
               class="text-container {{item.shape}} eturi">
            {{item.text.eturi}}
          </div>
          <div *ngIf="item.text && (isTwoGroup(item.text) || isThreeGroup(item.text)  || isFourGroup(item.text))"
               [style.background]="item.color"
               class="text-container {{item.shape}} takari">
            {{item.text.takari}}
          </div>
          <div *ngIf="item.text && (isThreeGroup(item.text)  || isFourGroup(item.text))"
               [style.background]="item.color"
               class="text-container {{item.shape}} kokari">
            {{item.text.kokari}}
          </div>
          <div *ngIf="item.text && isFourGroup(item.text)"
               [style.background]="item.color"
               class="text-container {{item.shape}} oikuri">
            {{item.text.nekari}}
          </div>
        </div>
      </div>
      <div [style.width]="tileDimension * carpet.width + 'px'" class="audience-container"> Audience</div>
      <div (cdkDropListDropped)="removeDraggedPerson()"
           [style.flex]="'0 1 ' + tileDimension + 'px'"
           [style.height]="tileDimension + 'px'"
           [style.width]="tileDimension + 'px'"
           cdkDropList
           class="tile trash-can-container">
        <span *ngIf="isDeletable" cdkDrag> 🗑️ </span>
      </div>
    </div>
  </div>
</div>

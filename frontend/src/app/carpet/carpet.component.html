<div
  [style.background-color]="carpet.color"
  [style.height]="(carpet.height * tileDimension) + 'px'"
  [style.width]="(carpet.width * tileDimension) + 'px'"
  class="carpet">
  <div class="grid">
    <div class="lines vertical">
      <div *ngFor="let _ of verticalSegments" class="line"></div>
    </div>
    <div class="lines horizontal">
      <div *ngFor="let _ of horizontalSegments" class="line"></div>
    </div>
    <div
      [style.height]="(carpet.height * tileDimension) + 'px'"
      cdkDropListGroup
      class="tile-container">
      <div
        (cdkDropListDropped)="swapPositions(index)"
        (click)="active.emit(item)"
        *ngFor="let item of subframe.grid.slice(0, carpet.height*carpet.width); index as index"
        [@animate]="{value: animate, params: getAnimationParams(item, index)}"
        [attr.index]="index"
        [class.active]="activeItem && activeItem === item"
        [style.flex]="'0 1 ' + tileDimension + 'px'"
        [style.height]="tileDimension + 'px'"
        [style.width]="tileDimension + 'px'"
        cdkDropList
        class="tile {{item.position[0]}}">
        <div (cdkDragStarted)="dragStarted(index)" cdkDrag class="drag-container">
          <div
            *ngIf="isPerson(item.content)"
            [style.background]="item.content.color"
            class="text-container {{item.shape}} grid-middle">
            {{item.content.name}}
          </div>
          <div
            *ngIf="isTwoGroup(item.content) || isThreeGroup(item.content)
            || isFourGroup(item.content) || isFiveGroup(item.content)"
            [style.background]="item.content?.color !== null ? item.content.color : item.content.flyer?.color"
            class="text-container {{item.shape}} grid-top">
            {{item.content.flyer?.id! | personName:people!}}
          </div>
          <div
            *ngIf="isTwoGroup(item.content) || isThreeGroup(item.content)
            || isFourGroup(item.content) || isFiveGroup(item.content)"
            [style.background]="item.content?.color !== null ? item.content.color : item.content.backspot?.color"
            class="text-container {{item.shape}} grid-bottom">
            {{item.content.backspot?.id! | personName:people!}}
          </div>
          <div
            *ngIf="isThreeGroup(item.content)  || isFourGroup(item.content)
            || isFiveGroup(item.content)"
            [style.background]="item.content?.color !== null ? item.content.color : item.content.mainbase?.color"
            class="text-container {{item.shape}} grid-left">
            {{item.content.mainbase?.id! | personName:people!}}
          </div>
          <div *ngIf="isFourGroup(item.content) || isFiveGroup(item.content)"
               [style.background]="item.content?.color !== null ? item.content.color : item.content.sidebase?.color"
               class="text-container {{item.shape}} grid-right">
            {{item.content.sidebase?.id! | personName:people!}}
          </div>
          <div *ngIf="isFiveGroup(item.content)"
               [style.background]="item.content?.color !== null ? item.content.color : item.content.frontspot?.color"
               class="text-container {{item.shape}} grid-middle">
            {{item.content.frontspot?.id! | personName:people!}}
          </div>
        </div>
      </div>
      <div [style.width]="tileDimension * carpet.width + 'px'" class="audience-container"
           translate="CARPET.AUDIENCE"></div>
      <div (cdkDropListDropped)="removeDraggedPerson()"
           [style.flex]="'0 1 ' + tileDimension + 'px'"
           [style.height]="tileDimension + 'px'"
           [style.width]="tileDimension + 'px'"
           cdkDropList
           class="tile trash-can-container">
        <span *ngIf="isDeletable" cdkDrag> 🗑️ </span>
      </div>
    </div>
  </div>
</div>
